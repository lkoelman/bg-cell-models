/**
 * Initialization code for Mahon MSN model for use in network simulations.
 *
 * @author      Lucas Koelman
 * @date        14/08/2018
 */

load_file("stdlib.hoc")
load_file("stdrun.hoc")


begintemplate MahonMSN

// Declare public members of class/template
public soma
create soma[1] // NEURON error if not created here, before init()

// Named Sectionlists to conform to cell prototype required by BluePyOpt.Ephys
objref all, somatic, basal, apical, axonal, myelinated

proc init() {
    create soma[1]

    // Initialize sectionlists, even though some will be empty
    all = new SectionList()
    somatic = new SectionList()
    basal = new SectionList()
    apical = new SectionList()
    axonal = new SectionList()
    myelinated = new SectionList()

    soma[0] {
        nseg = 3
        diam = 5.6419   // from gruber c_cell this gives SA=100 uM^2
        L = 5.6419      // from gruber c_cell this gives SA=100 uM^2
        
        insert Nam
        insert Km
        insert Leakm
        insert Kirm
        insert KAfm
        insert KAsm
        insert Krpm
        insert NaPm
        insert NaSm

        all.append()
        somatic.append()
    }
}

endtemplate MahonMSN

// Physiological parameters
// celsius = 37         // the value from mahon et al 2000
// v_init = -77.4       // 11/13/06


/**
 * Make MSN cell without storing a global reference : you are responsible
 * for keeping a reference to the returned objref.
 *
 * @note    Since there is no additional setup code, you can call
 *          `cell = h.MahonMsn()` from Python instead of using this function.
 */
obfunc make_mahon_msn_ref() { localobj cell_ref
    cell_ref = new MahonMSN()
    return cell_ref
}